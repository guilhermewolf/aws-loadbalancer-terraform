# aws-loadbalancer-terraform

This is a repository containing the resources for provisioning AWS infrastructure with Terraform for configuring a web application.

> **Requeriments:** Git, Terraform (v0.14.6), AWS CLI

## We started by downloading our files
```shell
git clone https://github.com/guilhermewolf/aws-loadbalancer-terraform.git
```
## AWS
You will need to have an AWS account and create the access keys to use in configuring the AWS CLI
## AWS CLI
To install the AWS CLI use the official Amazon documentation (https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html)

With AWS CLI installed, make your default configuration:
```shell
aws configure
```
## EC2

This folder contains the files for deploy an single EC2 instance under a Application Load Balancer.

The EC2 Instance will have Apache installed through bootstrapping

#### To deploy this environment run this commands inside the `EC2` folder.
```shell
terraform init
terraform plan
terraform apply
```

## AutoScaling

This folder contains the files for deploy an EC2 instance under a load balancer. The EC2 instance is managed by an auto scaling group thats scale in with those parameters:
- **Scale in**: CPU utilization > 80%
- **Scale out**: CPU Utilization < 60%
- **Minimun size**: 1
- **Maximun size**: 3

The EC2 Instances are being generated by a launch configuration, within this configuration there is a bootstrap for installing apache

#### To deploy this environment run this commands inside the `AutoScaling` folder.
```shell
terraform init
terraform plan
terraform apply
```
> **Note:** After the infrastructure is built it takes a few minutes to the Load Balancer perform the EC2 healthcheck and start working properly
